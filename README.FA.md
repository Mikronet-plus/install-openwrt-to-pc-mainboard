 # OpenWrt + Passwall Ù†ØµØ¨ Ùˆ Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ  

## ğŸ” OpenWrt Ú†ÛŒØ³ØªØŸ  

[OpenWrt](https://openwrt.org/)   
ÛŒÚ© Ø³ÛŒØ³ØªÙ…â€ŒØ¹Ø§Ù…Ù„ Ù…ØªÙ†â€ŒØ¨Ø§Ø² Ù„ÛŒÙ†ÙˆÚ©Ø³ Ø¨ÛŒØ³ Ø¨Ø±Ø§ÛŒ Ø±ÙˆØªØ±Ù‡Ø§ Ùˆ Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ Ø´Ø¨Ú©Ù‡ Ø§Ø³Øª.    
Ø¨Ø±Ø®Ù„Ø§Ù ÙØ±ÛŒÙ…ÙˆØ±Ù‡Ø§ÛŒ Ú©Ø§Ø±Ø®Ø§Ù†Ù‡â€ŒØ§ÛŒ Ú©Ù‡ Ù…Ø¹Ù…ÙˆÙ„Ø§Ù‹ Ø§Ù…Ú©Ø§Ù†Ø§Øª Ù…Ø­Ø¯ÙˆØ¯ÛŒ Ø¯Ø§Ø±Ù†Ø¯Ø¨Ù‡ Ø´Ù…Ø§ Ø¢Ø²Ø§Ø¯ÛŒ Ú©Ø§Ù…Ù„ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯ ØªØ§: OpenWrt  

- ğŸ”§ Ù¾Ú©ÛŒØ¬â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù Ù†ØµØ¨ Ú©Ù†ÛŒØ¯ (Ù…Ø«Ù„ ÙØ§ÛŒØ±ÙˆØ§Ù„ØŒ VPNØŒ Ù¾Ø±ÙˆÚ©Ø³ÛŒ Ùˆ Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ø´Ø¨Ú©Ù‡).  
- ğŸŒ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ø´Ø¨Ú©Ù‡ (QoSØŒ VLANØŒ RoutingØŒ DNS Ùˆ ...) Ø±Ø§ Ú©Ù†ØªØ±Ù„ Ú©Ù†ÛŒØ¯.  
- ğŸ›¡ Ø§Ù…Ù†ÛŒØª Ø¨ÛŒØ´ØªØ±ÛŒ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´ÛŒØ¯ Ùˆ Ø³ÛŒØ³ØªÙ… Ø±Ø§ Ø¨Ù‡â€ŒØ±ÙˆØ² Ù†Ú¯Ù‡ Ø¯Ø§Ø±ÛŒØ¯.  
- âš¡ Ú©Ø§Ø±Ø§ÛŒÛŒ Ùˆ Ø³Ø±Ø¹Øª Ø¯Ø³ØªÚ¯Ø§Ù‡ Ø±Ø§ Ø¨Ù‡ÛŒÙ†Ù‡ Ú©Ù†ÛŒØ¯.  

Ø¨Ù‡â€ŒØ·ÙˆØ± Ø®Ù„Ø§ØµÙ‡: OpenWrt Ø±ÙˆØªØ± Ù…Ø¹Ù…ÙˆÙ„ÛŒ Ø´Ù…Ø§ Ø±Ø§ Ø¨Ù‡ ÛŒÚ© **Ø³Ø±ÙˆØ± Ø´Ø¨Ú©Ù‡ Ù‚Ø¯Ø±ØªÙ…Ù†Ø¯ Ùˆ Ø§Ù†Ø¹Ø·Ø§Ùâ€ŒÙ¾Ø°ÛŒØ±** ØªØ¨Ø¯ÛŒÙ„ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.

Ø§ÛŒÙ† Ø±ÛŒÙ¾Ùˆ Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ù†ØµØ¨ Ùˆ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² [OpenWrt](https://openwrt.org/) Ùˆ Ù¾Ú©ÛŒØ¬ [Passwall](https://github.com/xiaorouji/openwrt-passwall) Ø±Ø§ ÙØ±Ø§Ù‡Ù… Ù…ÛŒâ€ŒÚ©Ù†Ø¯.  

---

## ğŸ“Œ Ù¾ÛŒØ´â€ŒÙ†ÛŒØ§Ø²Ù‡Ø§
- Ø¯Ø³ØªÚ¯Ø§Ù‡ Ø³Ø§Ø²Ú¯Ø§Ø± Ø¨Ø§ OpenWrt (Ù…ÙˆØ¯Ù…/Ø±ÙˆØªØ± Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒâ€ŒØ´Ø¯Ù‡)  
- Ø§ØªØµØ§Ù„ Ø§ÛŒÙ†ØªØ±Ù†Øª / Ø¨Ø¯ÙˆÙ† ÙÛŒÙ„ØªØ±   
- Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ù…Ø­ÛŒØ· SSH ÛŒØ§ LuCI (Ø±Ø§Ø¨Ø· ÙˆØ¨ OpenWrt)  

---

## âš™ï¸ Ù…Ø±Ø§Ø­Ù„ Ù†ØµØ¨ OpenWrt
1. ÙˆØ§Ø±Ø¯ [ØµÙØ­Ù‡ Ø¯Ø§Ù†Ù„ÙˆØ¯ OpenWrt](https://openwrt.org/toh/start) Ø´ÙˆÛŒØ¯.  
2. Ù…Ø¯Ù„ Ø¯Ø³ØªÚ¯Ø§Ù‡ Ø®ÙˆØ¯ Ø±Ø§ Ù¾ÛŒØ¯Ø§ Ú©Ù†ÛŒØ¯ Ùˆ Ø§ÛŒÙ…ÛŒØ¬ Ù…Ù†Ø§Ø³Ø¨ Ø±Ø§ Ø¯Ø§Ù†Ù„ÙˆØ¯ Ú©Ù†ÛŒØ¯.  
3. Ø§Ø² Ø¨Ø®Ø´ Ù…Ø¯ÛŒØ±ÛŒØª Ø±ÙˆØªØ± (Ù…Ø¹Ù…ÙˆÙ„Ø§Ù‹ Ø¯Ø± `192.168.1.1`) ÙˆØ§Ø±Ø¯ Ø´ÙˆÛŒØ¯ Ùˆ ÙØ±ÛŒÙ…ÙˆØ± OpenWrt Ø±Ø§ ÙÙ„Ø´ Ú©Ù†ÛŒØ¯.  
4. Ø¨Ø¹Ø¯ Ø§Ø² Ø±ÛŒØ¨ÙˆØªØŒ ÙˆØ§Ø±Ø¯ Ø±Ø§Ø¨Ø· ÙˆØ¨ ÛŒØ§ SSH Ø´ÙˆÛŒØ¯.  

---
## Ø§ÙØ²Ø§ÛŒØ´ ÙØ¶Ø§ÛŒ Ø¯ÛŒØ³Ú© Ø¨Ø±Ø§ÛŒ Ù†ØµØ¨ Ù¾Ú©ÛŒØ¬ Ù‡Ø§-Ø¨Ù‡ ÙˆÛŒØ¯ÛŒÙˆ Ø¢Ù…ÙˆØ²Ø´ÛŒ Ù…Ø±Ø§Ø¬Ø¹Ù‡ Ú©Ù†ÛŒØ¯  
# 

# Configure startup scripts   

-----  
```
cat << "EOF" > /etc/uci-defaults/70-rootpt-resize                                                         
if [ ! -e /etc/rootpt-resize ] \                                                                          
&& type parted > /dev/null \                                                                              
&& lock -n /var/lock/root-resize                                                                          
then                                                                                                      
ROOT_BLK="$(readlink -f /sys/dev/block/"$(awk -e \                                                        
'$9=="/dev/root"{print $3}' /proc/self/mountinfo)")"                                                      
ROOT_DISK="/dev/$(basename "${ROOT_BLK%/*}")"                                                             
ROOT_PART="${ROOT_BLK##*[^0-9]}"                                                                          
parted -f -s "${ROOT_DISK}" \                                                                             
resizepart "${ROOT_PART}" 100%                                                                            
mount_root done                                                                                           
touch /etc/rootpt-resize                                                                                  
reboot                                                                                                    
fi                                                                                                        
exit 1                                                                                                    
EOF                                                                                                       
cat << "EOF" > /etc/uci-defaults/80-rootfs-resize                                                         
if [ ! -e /etc/rootfs-resize ] \                                                                          
&& [ -e /etc/rootpt-resize ] \                                                                            
&& type losetup > /dev/null \                                                                             
&& type resize2fs > /dev/null \                                                                           
&& lock -n /var/lock/root-resize                                                                          
then                                                                                                      
ROOT_BLK="$(readlink -f /sys/dev/block/"$(awk -e \                                                        
'$9=="/dev/root"{print $3}' /proc/self/mountinfo)")"                                                      
ROOT_DEV="/dev/${ROOT_BLK##*/}"                                                                           
LOOP_DEV="$(awk -e '$5=="/overlay"{print $9}' \                                                           
/proc/self/mountinfo)"                                                                                    
if [ -z "${LOOP_DEV}" ]                                                                                   
then                                                                                                      
LOOP_DEV="$(losetup -f)"                                                                                  
losetup "${LOOP_DEV}" "${ROOT_DEV}"                                                                       
fi                                                                                                        
resize2fs -f "${LOOP_DEV}"                                                                                
mount_root done                                                                                           
touch /etc/rootfs-resize                                                                                  
reboot                                                                                                    
fi                                                                                                        
exit 1                                                                                                    
EOF                                                                                                       
cat << "EOF" >> /etc/sysupgrade.conf                                                                      
/etc/uci-defaults/70-rootpt-resize                                                                        
/etc/uci-defaults/80-rootfs-resize                                                                        
EOF 
```

------

```  
opkg update
```
```
opkg install parted losetup resize2fs
```
```
sh /etc/uci-defaults/70-rootpt-resize
``` 




## ğŸ”‘ Ù†ØµØ¨ Passwall


# System Requirements :

- CPU : `+700 MHz âœ…`

- RAM : `+256 MB âœ…`

- âš ï¸ Before Installation, Make sure `Wan Address` And `Lan address` are not same !
     
# INSTALL PASSWALL : 
Run this command in openwrt remote ssh to install passwall2 

ğŸ”´ğŸ”´ğŸ”´ The Routers With `128 MB RAM Memory` , Please `downgrade` to [OPENWRT 22.03.3](https://archive.openwrt.org/releases/22.03.3/targets/) ğŸ”´ğŸ”´ğŸ”´

```
rm -f passwallx.sh && wget https://raw.githubusercontent.com/amirhosseinchoghaei/Passwall/main/passwallx.sh && chmod 777 passwallx.sh && sh passwallx.sh
```
Done !

# Types Support

[Mahsa Core](https://github.com/GFW-knocker/Xray-core/releases) â†©ï¸

VLESS (XRAY âœ… SING-BOX âœ…)

VMESS (XRAY âœ… SING-BOX âœ…)

REALITY (XRAY âœ… SING-BOX âŒ)

TROJAN (XRAY âœ… SING-BOX âœ…)

HYSTERIA2 (XRAY âŒ SING-BOX âœ…)

TUIC (XRAY âŒ SING-BOX âœ…)

SHADOWSOCKS (XRAY âœ… SING-BOX âœ…)

WIREGUARD (XRAY âœ… SING-BOX âœ…)

SOCKS (XRAY âœ… SING-BOX âœ…)

HTTP (XRAY âœ… SING-BOX âœ…)


#

âœ… Tested On : Xiaomi 4a Gigabit , TP-Link C6 v3 , Mikrotik Hap ac2 , GL.iNet AR300M (NOR) , Linksys ea7500. v1-v2 , Linksys ea8100 v1-v2 , ASUS RT-N66U , Xiaomi AX3600 , Xiomi AX3200 , Xiaomi AX6000 , Xiaomi AX3000T ,  Linksys EA8300 , Netgear r7800 , Super x7 Server Mainboars

# Features

âš¡ Full Automatic installation Packages Just in one step

âš¡ Install XRAY On Temp Space if You Don't Have Enough Disk Space (Smart)

âš¡ IRAN IP & Domain Traffic Direct (100%)

âš¡ Improve Performance

âš¡ Server WARP Connection Fixed

âš¡ Default Kill Switch

âš¡ XRAY Fragment tlshello | 1-3
